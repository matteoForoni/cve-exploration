import numpy as np
import os

def generate_servers_list(number_of_rows, base_server_name, products_list):
    counter = 1
    servers_list_string = 'server_name,product,is_dmz,days_since_patching,is_eol\n'
    while counter <= number_of_rows:
        server = []
        server.append(f'{base_server_name}{counter}') # server name
        server.append(np.random.choice(products_list)) # product installed on server
        server.append(np.random.randint(0,2)) # server is in DMZ or not
        server.append(np.random.randint(0,365)) # days since last patching
        server.append(np.random.randint(0,2)) # server is in EOL or not
        servers_list_string += ','.join(map(str, server)) +'\n'
        counter += 1
    return servers_list_string


# Products list extracted (first 50 records) from vulnerability_count by products
products_list = ['debian_linux', 'android', 'ubuntu_linux', 'linux_kernel', 'mac_os_x', 'iphone_os', 'chrome', 'firefox', 'windows_server_2008', 'windows_7', 'acrobat_reader_dc', 'acrobat_dc', 'windows_10', 'windows_server_2012', 'internet_explorer', 'windows_8.1', 'safari', 'enterprise_linux_server', 'enterprise_linux_desktop', 'enterprise_linux_workstation', 'windows_rt_8.1', 'windows_server_2016', 'acrobat', 'opensuse', 'windows_vista', 'fedora', 'thunderbird', 'flash_player', 'tvos', 'edge', 'firefox_esr', 'acrobat_reader', 'leap', 'itunes', 'imagemagick', 'seamonkey', 'office', 'reader', 'wireshark', 'watchos', 'windows_server_2019', 'windows_xp', 'enterprise_linux', 'enterprise_linux_server_eus', 'php', 'mac_os_x_server', 'sd_625_firmware', 'windows_server_2003', 'sd_210_firmware', 'sd_212_firmware']

project_folder = os.getcwd()
servers_file =  f'{project_folder}\\data\\servers.csv'

servers_list = generate_servers_list(100, 'pippo', products_list)

with open(servers_file, 'w') as file:
    file.write(servers_list)